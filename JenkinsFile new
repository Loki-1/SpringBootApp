pipeline{
agent any
tools
{
maven 'maven_3.6.1'
}
environment {
        // Define environment variables if needed
        DOCKER_REGISTRY = 'lokeshnagam121'
        dockerImage = 'lokeshnagam121/springboot'
        IMAGE_TAG = 'latest'
        registryCredential ='dockerhub'
}
stages
{
stage('SCM Checkout'){
    steps{
        git credentialsId: 'git', url: 'https://github.com/Loki-1/SpringBootApp.git'
    }
}
stage('Building code as a jar file')
  {
  steps
  {
  sh  "mvn clean package"
  }
  }
    
stage('Image Build for this application') {
            steps {
                // Build your Docker image
                script {
                    sh 'docker build -t lokeshnagam121/springboot .'
                }
            }
}
    
stage('pushing Image into docker-hub') {
            steps {
                // Build your Docker image
                script {
                    // Push the Docker image to the registry
                    docker.withRegistry('', registryCredential) {
                        docker.image("${dockerImage}:${IMAGE_TAG}").push()
                    }
                }
            }
}
   
}
}
